# í”„ë¡¬í”„íŠ¸ ë¡œê·¸ #10: Phase 5.5 Blending ìµœì í™”

## ë‚ ì§œ
2026-01-07 ~ 2026-01-10

## ëª©ì 
Phase 5 (Stacking) + Phase 6 (Error Analysis) ë¸”ë Œë”©ì„ í†µí•œ ì¶”ê°€ ì„±ëŠ¥ í–¥ìƒ

---

## ë°°ê²½

### Phase 5 ì´í›„ ìƒí™©
```
Phase 5 (Stacking):    16.5316m ğŸ¥‡ ìµœê³  ê¸°ë¡
Phase 5.1 (MLP Meta):  16.7311m (+0.20m ì•…í™”)
Phase 6 (Error):       16.5622m (+0.03m ì•…í™”)

ë¬¸ì œ: Phase 5ê°€ ì´ë¯¸ ìµœì ? ì¶”ê°€ ê°œì„  ë°©ë²•ì€?
```

### ê°€ì„¤
```
Phase 5ì™€ Phase 6ì˜ ì°¨ì´ê°€ ì‘ìŒ (0.03m)
â†’ ë¸”ë Œë”©ìœ¼ë¡œ ìƒë³´ì  íš¨ê³¼ ê¸°ëŒ€
â†’ Phase 6ì˜ ì—ëŸ¬ íƒ€ê²ŸíŒ… í”¼ì²˜ê°€ ì¼ë¶€ ì¼€ì´ìŠ¤ì—ì„œ íš¨ê³¼ì ì¼ ìˆ˜ ìˆìŒ
```

---

## ì‹¤í—˜ ê³¼ì •

### ì‹¤í—˜ 1: Phase 5 + Phase 4 ë¸”ë Œë”© (ì‹¤íŒ¨)

**í”„ë¡¬í”„íŠ¸:**
```
ì´ì „ì— ì¶”ì²œë°›ì€ Averaging Ensemble:
Phase 5 (Stacking) + Phase 4 (Weighted) = 0.6 : 0.4 ë¸”ë Œë”©

ì´ìœ :
- Phase 5: ë¹„ì„ í˜• Meta-Learning
- Phase 4: ì„ í˜• ê°€ì¤‘ í‰ê· 
- ì„œë¡œ ë‹¤ë¥¸ ë°©ì‹ì˜ ì¥ì  ê²°í•©
```

**êµ¬í˜„:**
```python
final = 0.6 * phase5_pred + 0.4 * phase4_pred
```

**ê²°ê³¼:**
```
LB: 16.5939m (+0.0623m ì•…í™”) âŒ

ì‹¤íŒ¨ ì›ì¸:
- Phase 4 (16.8272m)ê°€ Phase 5ë³´ë‹¤ í›¨ì”¬ ë‚˜ì¨
- 40% ì„ìœ¼ë‹ˆê¹Œ ì„±ëŠ¥ ì €í•˜
- ì°¨ì´ í° ëª¨ë¸ ë¸”ë Œë”©ì€ ì—­íš¨ê³¼
```

### ì‹¤í—˜ 2: Phase 5 + Phase 6 ë¸”ë Œë”© (0.8/0.2)

**í”„ë¡¬í”„íŠ¸:**
```
Phase 5 + Phase 4ê°€ ì‹¤íŒ¨í–ˆìœ¼ë‹ˆ,
Phase 5 + Phase 6 (ì°¨ì´ 0.03më§Œ) ì‹œë„

ê°€ì„¤:
- Phase 6ì´ Phase 4ë³´ë‹¤ í›¨ì”¬ ê°€ê¹Œì›€
- ì—ëŸ¬ íƒ€ê²ŸíŒ… í”¼ì²˜ê°€ ì¼ë¶€ ì¼€ì´ìŠ¤ì—ì„œ íš¨ê³¼
- ë³´ìˆ˜ì ìœ¼ë¡œ 0.8/0.2 ì‹œì‘
```

**êµ¬í˜„:**
```python
final = 0.8 * phase5_pred + 0.2 * phase6_pred
```

**ê²°ê³¼:**
```
LB: 16.5065m (-0.0251m ê°œì„ ) âœ…

ì„±ê³µ!
- Phase 5 vs Phase 6 í‰ê·  ì°¨ì´: 1.67m
- ì°¨ì´ 5m ì´ìƒ ì¼€ì´ìŠ¤: 185ê°œ (7.7%)
- ì´ ì¼€ì´ìŠ¤ë“¤ì—ì„œ ë¸”ë Œë”© íš¨ê³¼
```

### ì‹¤í—˜ 3: Grid Search (1ì°¨ - 5ê°œ ê°€ì¤‘ì¹˜)

**í”„ë¡¬í”„íŠ¸:**
```
0.8/0.2ê°€ ì„±ê³µí–ˆìœ¼ë‹ˆ ìµœì  ê°€ì¤‘ì¹˜ ì°¾ê¸°

Grid Search:
- 0.85/0.15 (ë” ë³´ìˆ˜ì )
- 0.82/0.18 (ë¯¸ì„¸ ì¡°ì • 1)
- 0.78/0.22 (ë¯¸ì„¸ ì¡°ì • 2)
- 0.75/0.25 (ì•½ê°„ ê³µê²©ì )
- 0.70/0.30 (ë” ê³µê²©ì )
```

**êµ¬í˜„:**
```python
# predict_averaging_grid_search.py
weights = [
    (0.85, 0.15), (0.82, 0.18), (0.78, 0.22),
    (0.75, 0.25), (0.70, 0.30)
]
```

**ê²°ê³¼:**
```
ì¡°í•© 3 (0.78/0.22): 16.5049m (-0.0016m)
ì¡°í•© 4 (0.75/0.25): 16.5029m (-0.0020m)
ì¡°í•© 5 (0.70/0.30): 16.5003m (-0.0026m) â­

íŒ¨í„´ ë°œê²¬: Phase 6 ë¹„ì¤‘ â†‘ = ì„±ëŠ¥ â†‘
ì„ í˜• ê´€ê³„ í™•ì¸!
```

### ì‹¤í—˜ 4: Grid Search (2ì°¨ - ì¶”ê°€ 3ê°œ)

**í”„ë¡¬í”„íŠ¸:**
```
ì„ í˜• íŒ¨í„´ ë°œê²¬!
ë” ê³µê²©ì ì¸ ê°€ì¤‘ì¹˜ ì‹œë„:

ì¶”ê°€ 3ê°œ:
- 0.65/0.35 (ìµœì ì  ì˜ˆìƒ)
- 0.60/0.40 (Phase 5ì™€ 6 ê±°ì˜ ë™ë“±)
- 0.55/0.45 (Phase 6 ìš°ì„¸)

ì´ë²ˆì´ ë§ˆì§€ë§‰! ê²°ê³¼ì™€ ë¬´ê´€í•˜ê²Œ ë¬¸ì„œí™” ì‹œì‘
```

**êµ¬í˜„:**
```python
# predict_averaging_grid_search_v2.py
additional_weights = [
    (0.65, 0.35), (0.60, 0.40), (0.55, 0.45)
]
```

**ê²°ê³¼:**
```
ì¡°í•© 6 (0.65/0.35): 16.4988m (-0.0015m)
ì¡°í•© 7 (0.60/0.40): 16.4981m (-0.0007m) ğŸ¥‡ ìµœê³ !
ì¡°í•© 8 (0.55/0.45): 16.4985m (+0.0004m) â†‘

Uì ê³¡ì„  ë°œê²¬!
0.60/0.40ì´ ìµœì €ì  = ìµœì  ê°€ì¤‘ì¹˜!
```

---

## ìµœì¢… ì„±ê³¼

### ìŠ¤ì½”ì–´ë³´ë“œ
```
Phase 5 (Stacking):         16.5316m (baseline)
Phase 5+6 (0.80/0.20):      16.5065m (-0.025m)
Phase 5+6 (0.78/0.22):      16.5049m (-0.027m)
Phase 5+6 (0.75/0.25):      16.5029m (-0.029m)
Phase 5+6 (0.70/0.30):      16.5003m (-0.031m)
Phase 5+6 (0.65/0.35):      16.4988m (-0.033m)
Phase 5+6 (0.60/0.40):      16.4981m (-0.034m) ğŸ¥‡
Phase 5+6 (0.55/0.45):      16.4985m (-0.033m)

ì´ ê°œì„ : -0.0335m (-0.20%)
```

### ê°€ì¤‘ì¹˜ íŒ¨í„´
```
  LB Score
   16.51 â”‚     â—
         â”‚       â—
   16.50 â”‚         â—
         â”‚           â—
   16.49 â”‚               â—‰ â† ìµœì ì  (0.60/0.40)
         â”‚                 â—
         â”‚
   â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       0.8   0.75   0.70   0.65   0.60   0.55
              Phase 6 ë¹„ì¤‘ â†’

íŒ¨í„´: Uì ê³¡ç·š (Convex)
ìµœì ì : 0.60/0.40 (Phase 5 : Phase 6 = 3 : 2)
```

---

## í•µì‹¬ í•™ìŠµ

### 1. ë¸”ë Œë”©ì˜ ì¡°ê±´
```
ì„±ê³µ ì¡°ê±´:
âœ… ë¹„ìŠ·í•œ ì„±ëŠ¥ì˜ ëª¨ë¸ë¼ë¦¬ (Phase 5: 16.53m, Phase 6: 16.56m)
âœ… ì°¨ì´ 0.05m ì´ë‚´

ì‹¤íŒ¨ ì¡°ê±´:
âŒ ì„±ëŠ¥ ì°¨ì´ í° ëª¨ë¸ (Phase 4: 16.83m, ì°¨ì´ 0.3m)
âŒ ë‚˜ìœ ëª¨ë¸ ë¹„ì¤‘ ë†’ìœ¼ë©´ ì˜¤íˆë ¤ ì•…í™”
```

### 2. Grid Searchì˜ ê°€ì¹˜
```
ë‹¨ìˆœ ì‹œë„: 0.8/0.2 = 16.5065m
Grid Search: 0.6/0.4 = 16.4981m

ì¶”ê°€ ê°œì„ : -0.0084m
â†’ ì²´ê³„ì  íƒìƒ‰ì˜ ì¤‘ìš”ì„±!
```

### 3. Uì ê³¡ì„ ì˜ ë°œê²¬
```
ê°€ì„¤: "ë” ê³µê²©ì ì¼ìˆ˜ë¡ ì¢‹ë‹¤" (ì„ í˜•)
ì‹¤ì œ: Uì ê³¡ì„  (ë¹„ì„ í˜•, ìµœì ì  ì¡´ì¬)

êµí›ˆ:
- ì„ ì…ê²¬ ì—†ì´ ë°ì´í„° ë”°ë¥´ê¸°
- ì–‘ë°©í–¥ íƒìƒ‰ì˜ ì¤‘ìš”ì„±
- 0.60/0.40ì´ Phase 5ì™€ 6ì˜ í™©ê¸ˆë¹„ìœ¨
```

### 4. ì–¸ì œ ë©ˆì¶œê¹Œ?
```
ë©ˆì¶˜ ì´ìœ :
âœ… ëª…í™•í•œ ìµœì ì  ë°œê²¬ (Uì ê³¡ì„ )
âœ… ì–‘ìª½ ëª¨ë‘ ì•…í™” (0.65, 0.55)
âœ… ì¶”ê°€ ê°œì„  ë¯¸ë¯¸ (0.001m ì´í•˜)
âœ… 7ê°œ ë°ì´í„°ë¡œ ì¶©ë¶„í•œ íŒ¨í„´

ëì—†ëŠ” ìµœì í™”ì˜ í•¨ì •:
âŒ 0.62/0.38? 0.58/0.42? 0.61/0.39?
â†’ ì†Œìˆ˜ì  ì‹¸ì›€, ë…¸ì´ì¦ˆ ìˆ˜ì¤€
â†’ ë¬¸ì„œí™”ê°€ ë” ê°€ì¹˜ ìˆìŒ
```

### 5. 30ë¶„ì˜ ê°€ì¹˜
```
íˆ¬ì ì‹œê°„: 30ë¶„
ê°œì„  íš¨ê³¼: 0.0335m (0.20%)

íš¨ìœ¨ì„±: ìµœê³ !
â†’ Grid Searchì˜ ìë™í™”
â†’ ë¹ ë¥¸ ì´í„°ë ˆì´ì…˜
â†’ ëª…í™•í•œ ê²°ê³¼
```

---

## ê¸°ìˆ ì  êµ¬í˜„

### Phase 5 + Phase 6 Blending
```python
# predict_averaging_phase5_phase6.py
import pandas as pd

# ì˜ˆì¸¡ ë¡œë“œ
phase5_pred = pd.read_csv('submission_stacking_lgb.csv')
phase6_pred = pd.read_csv('submission_stacking_v6.csv')

# ìµœì  ê°€ì¤‘ì¹˜: 0.60 / 0.40
W5, W6 = 0.60, 0.40

# ë¸”ë Œë”©
final_pred = phase5_pred.copy()
final_pred['end_x'] = W5 * phase5_pred['end_x'] + W6 * phase6_pred['end_x']
final_pred['end_y'] = W5 * phase5_pred['end_y'] + W6 * phase6_pred['end_y']

# ì €ì¥
final_pred.to_csv('submission_averaging_final.csv', index=False)
```

### Grid Search ìë™í™”
```python
# predict_averaging_grid_search.py
weights = [
    (0.85, 0.15), (0.82, 0.18), (0.78, 0.22),
    (0.75, 0.25), (0.70, 0.30)
]

for i, (w5, w6, desc) in enumerate(weights, 1):
    final = w5 * phase5 + w6 * phase6
    output = f'submission_averaging_grid_{i}_w5{int(w5*100)}_w6{int(w6*100)}.csv'
    final.to_csv(output, index=False)
```

---

## ë‹¤ìŒ ë‹¨ê³„ (ë¯¸êµ¬í˜„)

### ì™„ë£Œëœ ê²ƒ
- âœ… Phase 5 + Phase 6 ë¸”ë Œë”© (0.60/0.40)
- âœ… Grid Search (7ê°œ ê°€ì¤‘ì¹˜)
- âœ… ìµœì ì  ë°œê²¬ (Uì ê³¡ì„ )

### ì‹œë„í•˜ì§€ ì•Šì€ ê²ƒ
- âŒ 3-way ë¸”ë Œë”© (Phase 5 + Phase 6 + Phase 4)
  - ì´ìœ : Phase 4ê°€ ë„ˆë¬´ ë‚˜ì¨
- âŒ ì¡°ê±´ë¶€ ë¸”ë Œë”© (ì¼€ì´ìŠ¤ë³„ ë‹¤ë¥¸ ê°€ì¤‘ì¹˜)
  - ì´ìœ : ë³µì¡ë„ ì¦ê°€, íš¨ê³¼ ë¶ˆí™•ì‹¤
- âŒ ì˜µì…˜ B (5-Model Stacking)
  - ì´ìœ : ì‹œê°„ 3-4ì‹œê°„, ë¶ˆí™•ì‹¤ì„± ë†’ìŒ
  - í˜„ì¬ ì„±ì  ë§Œì¡± (16.4981m)

---

## íšŒê³ 

### ì˜í•œ ì 
1. âœ… ì²´ê³„ì  ì‹¤í—˜ ì„¤ê³„ (Phase 4 â†’ Phase 6)
2. âœ… Grid Search ìë™í™” (ë¹ ë¥¸ íƒìƒ‰)
3. âœ… ëª…í™•í•œ ì¢…ë£Œ ì¡°ê±´ (Uì ê³¡ì„  ë°œê²¬)
4. âœ… ë°ì´í„° ê¸°ë°˜ ì˜ì‚¬ê²°ì • (ì„ ì…ê²¬ ì—†ì´)
5. âœ… ì ì ˆí•œ íƒ€ì´ë°ì— ë©ˆì¶¤ (ëì—†ëŠ” ìµœì í™” íšŒí”¼)

### ë°°ìš´ ì 
> **"ë¸”ë Œë”©ì€ ë¹„ìŠ·í•œ ì„±ëŠ¥ ëª¨ë¸ë¼ë¦¬ë§Œ íš¨ê³¼ì "**
> 
> Phase 5 (16.53m) + Phase 4 (16.83m) = ì‹¤íŒ¨
> Phase 5 (16.53m) + Phase 6 (16.56m) = ì„±ê³µ
> 
> ì°¨ì´ 0.05m ì´ë‚´ê°€ í™©ê¸ˆ ê¸°ì¤€

> **"Grid Searchì˜ í˜"**
> 
> ë‹¨ìˆœ ì‹œë„ vs ì²´ê³„ì  íƒìƒ‰
> 0.0084m ì¶”ê°€ ê°œì„  (50% ë” ì¢‹ìŒ)
> 
> ìë™í™” + ë°ì´í„° = ìµœì ì  ë°œê²¬

> **"ì–¸ì œ ë©ˆì¶œì§€ ì•„ëŠ” ê²ƒë„ ëŠ¥ë ¥"**
> 
> Uì ê³¡ì„  ë°œê²¬ = ë©ˆì¶œ ì‹œì 
> ì¶”ê°€ ë¯¸ì„¸ ì¡°ì • < ë¬¸ì„œí™” ê°€ì¹˜
> 
> "ì™„ë²½ì€ ì„ ì˜ ì "

---

## ìµœì¢… ì •ë¦¬

### Phase 5.5 ì„±ê³¼
```
ë°©ë²•: Phase 5 (Stacking) + Phase 6 (Error) ë¸”ë Œë”©
ìµœì  ê°€ì¤‘ì¹˜: 0.60 / 0.40 (3 : 2 ë¹„ìœ¨)
ê°œì„ : 16.5316m â†’ 16.4981m (-0.0335m, -0.20%)
ì‹œê°„: 30ë¶„ (Grid Search 7ê°œ)
```

### í”„ë¡œì íŠ¸ ì „ì²´ ì—¬ì •
```
Phase 1 (Baseline):     20.36m
Phase 2 (Temporal):     18.88m  (-7.3%)
Phase 3 (Advanced):     18.85m  (-0.2%)
Phase 4 (Domain):       16.83m  (-10.7%)
Phase 5 (Stacking):     16.53m  (-1.8%)
Phase 5.5 (Blending):   16.50m  (-0.2%)

ì´ ê°œì„ : -18.9% (3.86m)
ì´ ê¸°ê°„: 15ì¼
```

### ìµœì¢… ë©”ì‹œì§€
> **"ì‘ì€ ê°œì„ ì˜ ëˆ„ì ì´ í° ê²°ê³¼ë¥¼ ë§Œë“ ë‹¤"**
> 
> Phase 5.5: 0.0335m (ì‘ìŒ)
> í•˜ì§€ë§Œ ì´ ëˆ„ì : 3.86m (í¼)
> 
> í¬ê¸°í•˜ì§€ ì•Šê³  ê³„ì† ì‹œë„í•˜ëŠ” ê²ƒì´ í•µì‹¬!

---

## ì°¸ê³  ìë£Œ

### ì½”ë“œ íŒŒì¼
- `src/models/predict_averaging_ensemble.py` (Phase 5 + Phase 4)
- `src/models/predict_averaging_phase5_phase6.py` (0.8/0.2)
- `src/models/predict_averaging_grid_search.py` (Grid Search 1ì°¨)
- `src/models/predict_averaging_grid_search_v2.py` (Grid Search 2ì°¨)

### ì œì¶œ íŒŒì¼
- `submissions/submission_averaging_v1.csv` (Phase 5 + Phase 4, 16.5939)
- `submissions/submission_averaging_v2_phase5_phase6.csv` (0.8/0.2, 16.5065)
- `submissions/submission_averaging_grid_5_w570_w630.csv` (0.7/0.3, 16.5003)
- `submissions/submission_averaging_grid_7_w560_w640.csv` (0.6/0.4, 16.4981) ğŸ¥‡

### ë°ì´í„° íŒŒì¼
- `submissions/grid_search_summary.csv`
- `submissions/grid_search_v2_summary.csv`

---

## í”„ë¡¬í”„íŠ¸ í†µê³„

- ì´ í”„ë¡¬í”„íŠ¸ ìˆ˜: 15+
- Phase 5.5 ê´€ë ¨: 10ê°œ
- ì˜¤ë¥˜ ìˆ˜ì •: 1íšŒ (ID ì»¬ëŸ¼ëª…)
- í‰ê·  ì‘ë‹µ ì‹œê°„: 30ì´ˆ
- ì±„íƒë¥ : 100%

---

**ğŸŠ Phase 5.5 ì™„ë£Œ!**

```
ë¸”ë Œë”©ë§Œìœ¼ë¡œ:
16.5316m â†’ 16.4981m (-0.0335m)

30ë¶„ íˆ¬ì
Grid Search 7ê°œ
ìµœì  ê°€ì¤‘ì¹˜ ë°œê²¬

"ì²´ê³„ì  ì ‘ê·¼ì˜ í˜!" âœ¨
```