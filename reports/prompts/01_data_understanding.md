# 프롬프트 로그 #01: 데이터 이해하기

## 날짜
2025-12-11

## 목적
K리그 패스 좌표 예측 데이터셋의 구조를 파악하고 분석 방향 설정

## 사용한 프롬프트

### 프롬프트 1: 데이터 구조 분석
```
나는 K리그 축구 경기에서 "최종 패스가 도착할 좌표"를 예측하는 
머신러닝 프로젝트를 진행하고 있어.

데이터 구조:
- train.csv: 학습용 패스 데이터
- test.csv: 예측할 패스 데이터
- test/ 폴더: 경기별/선수별 전체 패스 시퀀스 (예: 153363_1.csv)
- match_info.csv: 경기 메타데이터

질문:
1. test/ 폴더의 상세 데이터를 어떻게 활용해야 할까?
2. "최종 패스"의 의미를 어떻게 해석해야 할까?
3. 좌표 예측에서 가장 중요한 피처는 무엇일까?
```

### Claude 응답 요약
```
응답 요약 : 
1. test/ 폴더의 시퀀스 데이터 : **시간적 맥락(temporal context)**을 제공하는 핵심 자산
🎇 활용 방법:
    - 패스 체인 분석: 최종 패스 직전의 2-3개 패스 패턴 추출 (방향, 거리, 속도)
    - 공간적 흐름: 공격 진행 방향과 속도 계산 (예: 좌측에서 중앙으로 이동 중)
    - 리듬 파악: 패스 간격(time delta)으로 빠른 공격 vs 빌드업 구분
    - 선수 이동 궤적: 해당 선수의 최근 위치 변화로 움직임 예측
    - 팀 포메이션: 여러 선수의 동시 위치로 전술적 상황 파악

2. 문맥상 두 가지 해석이 가능
A. 어시스트 패스 (슈팅 직전 패스) : 골 찬스를 만드는 결정적 패스
    - 예측 목표: 슈터가 공을 받을 위치
    - 특징: 페널티 박스 근처, 공격 3구역
B. 공격 시퀀스의 마지막 패스 : 소유권 상실 전 최후 패스 (인터셉트, 아웃, 슈팅 등)
    - 예측 목표: 공격이 종료되는 지점

3. 좌표 예측에서 가장 중요한 피처
A. 공간적 피처 (가장 중요): 
    - 출발 위치 (x, y): 현재 공 위치가 가장 강력한 예측 인자
    - 거리-각도 조합: 선수 간 상대 위치
    - 필드 구역: 수비/중원/공격 3구역 분류
B. 맥락적 피처:
    - 패스 방향성: 이전 패스들의 벡터 합
    - 경기 상황: 득점차, 경과 시간 (수비적 vs 공격적)
    - 선수 역할: 포지션별 선호 패스 패턴
C. 전술적 피처:
    - 압박 강도: 근처 상대 선수 수
    - 공간 가용성: 빈 공간의 방향과 크기
    - 템포: 빠른 역습 vs 느린 빌드업
D. 선수/팀 특성:
    - 선수 스타일: 개인별 평균 패스 거리/방향
    - 팀 전술: 측면 vs 중앙 선호도
```

### 프롬프트 2: 좌표 시스템 이해
```
K리그 패스 좌표 예측 프로젝트 데이터 분석을 수행하고 있어.

**데이터 특성:**
- Train: 356,721개 패스 이벤트
- 좌표 범위:
    - start_x: 0.00 ~ 105.00
    - start_y: 0.00 ~ 68.00
    - end_x: 0.00 ~ 105.00
    - end_y: 0.00 ~ 68.00
- 타겟: end_x, end_y (멀티 타겟 회귀)

**컬럼:**
- 시간 정보: game_id, period_id, episode_id, time_seconds
- 주체 정보: team_id, player_id, is_home
- 액션 정보: action_id, type_name, result_name
- 위치 정보: start_x, start_y, end_x, end_y

**질문:**
1. 축구 경기장 좌표계에서 (0,0)은 어디를 의미하는거야? 
   - 코너, 아니면 중앙인가?
2. 좌표 분포 시각화에서 어떤 패턴을 찾아야 할까?
3. 이 데이터로 "최종 패스"를 예측한다는 건 정확히 무엇을 의미할까?
   - 공격 시퀀스의 마지막 패스를 찾는가?
   - 특정 조건을 만족하는 패스인가?
```

### Claude 응답 요약
```
1. (0,0)의 의미 
A. 표준 좌표계 (거의 확실):
    - (0, 0): 한쪽 골라인 왼쪽 코너
    - (105, 68): 반대편 골라인 오른쪽 코너
    - X축 (0~105m): 경기장 길이 방향 (공격 방향)
    - Y축 (0~68m): 경기장 너비 방향 (터치라인)
B. 실제 축구장 규격:
    - 105m × 68m는 표준 프로 경기장 크기입니다
    - 페널티 박스: X축으로 골라인에서 16.5m
    - 중앙선: X = 52.5m
    - 골대 중앙: (0, 34) 또는 (105, 34)

2. 어떤 패턴을 찾아야 할까?
A. 공간적 패턴
a. 히트맵: 패스 시작점과 종료점의 밀도
    - 중원(중앙선 근처)에 집중?
    - 측면 vs 중앙 선호도?
b. 공격 방향성:
    - 홈/원정팀의 공격 방향 확인 (is_home 별 분리)
    - X축 증가 방향이 공격인지 확인
------------------------------------------------------
B. 전술적 패턴 
a. 페널티 박스 근처 패스:
    - X > 88.5m 또는 X < 16.5m 구역 (위험 지역)
    - 최종 패스의 종료점이 여기 밀집되어 있을 가능성
b. 대각선 vs 직선 패스:
    - python 예시 : angle = np.arctan2(end_y - start_y, end_x - start_x)
c. 백패스 비율: end_x < start_x인 경우
------------------------------------------------------
C. 결과 기반 패턴
a. result_name 별 좌표 분포:
    - 성공 패스 vs 실패 패스의 위치 차이
    - 인터셉트/아웃 발생 위치
b. 거리 분포:
    - python 예시 : distance = np.sqrt((end_x - start_x)**2 + (end_y - start_y)**2)

3. "최종 패스" 예측의 의미 < 현재 데이터 구조로 보면의 전제에서 >
추론 1: Episode 기반 해석 (가장 가능성 높음)
    - episode_id: 공격 시퀀스를 나타내는 ID로 추정
    - 최종 패스: 각 episode의 마지막 패스 이벤트
    - 예측 목표: "이 공격 시퀀스가 어디서 끝날 것인가?"
추론 2: 특정 액션 결과
    - type_name 또는 result_name에 "final", "assist", "key_pass" 같은 값이 있을 수 있음
    - 확인: train['type_name'].value_counts() 출력 필요
추론 3: Test 데이터 구조
    - test.csv는 일부 패스만 포함 (최종 패스 직전 상황)
    - test/ 폴더는 전체 시퀀스 제공
    - 의미: "이 상황에서 다음 (최종) 패스는 어디로 갈까?"
```

### 다음 프롬프트 계획
- 피처 엔지니어링 방향